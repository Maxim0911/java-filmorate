# java-filmorate

## Краткое описание
База данных сервиса оценки фильмов с социальными функциями. Позволяет пользователям оценивать фильмы, добавлять друзей и управлять персональными предпочтениями.

## Схема базы данных кино‑сервиса.
<img width="1140" height="567" alt="Untitled (2)" src="https://github.com/user-attachments/assets/35a46515-5814-459e-aa45-b2b2d869fac0" />

**Структура таблиц**
1. **Users** - таблица пользователей
   
 - *id* - уникальный идентификатор пользователя (первичный ключ)

 - *email* - адрес электронной почты

 - *login* - логин для входа в систему

 - *name* - имя пользователя

 - *birthday* - дата рождения

2. **Films** - таблица фильмов
   
 - *id* - уникальный идентификатор фильма (первичный ключ)

 - *name* - название фильма

 - *description* - описание фильма

 - *duration* - продолжительность в минутах

 - *rating* - идентификатор возрастного рейтинга (внешний ключ к Rating)

3. **Friendships** - таблица дружеских связей
   
 - *user_id* - идентификатор пользователя (составной первичный ключ, внешний ключ к Users)

 - *friend_id* - идентификатор друга (составной первичный ключ, внешний ключ к Users)

4. **Film_likes** - таблица лайков фильмов
   
 - *film_id* - идентификатор фильма (составной первичный ключ, внешний ключ к Films)

 - *user_id* - идентификатор пользователя (составной первичный ключ, внешний ключ к Users)

5. **Genre** - таблица жанров
   
 - *id* - уникальный идентификатор жанра (первичный ключ)

 - *name* - название жанра

6. **Film_genre** - таблица связи фильмов и жанров
   
 - *film_id* - идентификатор фильма (составной первичный ключ, внешний ключ к Films)

 - *genre_id* - идентификатор жанра (составной первичный ключ, внешний ключ к Genre)

7. **Rating** - таблица возрастных рейтингов
   
 - *id* - уникальный идентификатор рейтинга (первичный ключ)

 - *rating* - название рейтинга (G, PG, PG-13, R, NC-17)

 ## Примеры команд

 1. Получение списка всех пользователей

```SQL
SELECT id, email, login, name, birthday
FROM users;
```

2. Получение топ-10 самых популярных фильмов
```SQL
SELECT f.id, f.name, COUNT(fl.user_id) AS likes_count
FROM films f
LEFT JOIN film_likes fl ON f.id = fl.film_id
GROUP BY f.id, f.name
ORDER BY likes_count DESC
LIMIT 10;
```
3. Фильмы определенного жанра с рейтингом
```SQL
SELECT f.name, g.name AS genre, r.rating
FROM films f
JOIN film_genre fg ON f.id = fg.film_id
JOIN genre g ON fg.genre_id = g.id
JOIN rating r ON f.rating = r.id
WHERE g.name = 'Комедия';
```
4. Получение списка всех фильмов.
```SQL
SELECT id,
       name,
       description,
       duration
FROM Films;
```
